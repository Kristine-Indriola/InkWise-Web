import{r as o,j as e,c as H}from"./client-Cv0X-2PX.js";const J=()=>{},K=[{label:"Showcase",href:"#dashboard"},{label:"Collections",href:"#categories"},{label:"Templates",href:"#templates"},{label:"About",href:"#about"},{label:"Contact",href:"#contact"}],P=(a=[])=>Array.isArray(a)?a.filter(Boolean).slice(0,7):[],f=({label:a,badge:s,onClick:c,iconClass:u,href:d,disabled:i})=>{const h=e.jsxs("button",{type:"button",className:"customer-icon-button","aria-label":a,onClick:i?J:c,disabled:i,children:[e.jsx("i",{className:u,"aria-hidden":"true"}),s?e.jsx("span",{className:"notification-badge",children:s}):null]});return d&&!c?e.jsxs("a",{className:"customer-icon-button","aria-label":a,href:d,children:[e.jsx("i",{className:u,"aria-hidden":"true"}),s?e.jsx("span",{className:"notification-badge",children:s}):null]}):h},R=(a,s)=>`${a}-${s}`,g={isAuthenticated:!1,name:"Guest",initials:"IN",profileUrl:"/customer/profile",purchaseUrl:"/customer/my-purchase",favoritesUrl:"/customer/favorites"},X=(a={})=>{var v;const{navLinks:s=[],searchEndpoint:c="#",notificationsUrl:u="#",favoritesUrl:d="#",cartUrl:i="/order/addtocart",orderSummaryEndpoint:h="/order/summary.json",cartItemsEndpoint:k="/order/cart/items",storageKey:S="inkwise-finalstep",csrfToken:b=((v=document.querySelector('meta[name="csrf-token"]'))==null?void 0:v.getAttribute("content"))??"",loginUrl:C="/customer/login",auth:E=g,unreadCount:x=0}=a,n={...g,...E||{}},I=P(s.length?s:K),[m,j]=o.useState(!1),[A,p]=o.useState(!1),[y,N]=o.useState(!1),[L,O]=o.useState(()=>Math.floor(Math.random()*360));o.useEffect(()=>{const t=window.setInterval(()=>{O(r=>(r+17)%360)},4e3);return()=>window.clearInterval(t)},[]),o.useEffect(()=>(document.body.classList.toggle("customer-nav-open",m),()=>document.body.classList.remove("customer-nav-open")),[m]),o.useEffect(()=>{const t=r=>{r.target.closest(".customer-topbar")||(N(!1),p(!1))};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[]);const T=async()=>{try{return(await fetch(h,{method:"GET",headers:{Accept:"application/json"},credentials:"same-origin"})).ok}catch(t){return console.warn("[InkWise] Unable to reach order summary",t),!1}},U=async t=>{if(!t)return!1;const r=t.productId??t.product_id,l=Number(t.quantity??10);if(!r)return!1;try{return(await fetch(k,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",...b?{"X-CSRF-TOKEN":b}:{}},credentials:"same-origin",body:JSON.stringify({product_id:Number(r),quantity:l})})).ok}catch(w){return console.warn("[InkWise] Unable to create order from summary",w),!1}},F=()=>{window.requestAnimationFrame(()=>{const t=document.querySelector('.customer-topbar__search-panel input[type="text"]');t==null||t.focus()})},q=async t=>{t.preventDefault();try{if(await T()){window.location.href=i;return}let r=null;try{const l=window.sessionStorage.getItem(S);r=l?JSON.parse(l):null}catch{r=null}if(r&&(r.productId||r.product_id)&&await U(r)){window.location.href=i;return}window.location.href=i}catch(r){console.warn("[InkWise] Cart shortcut failed",r),window.location.href="/order/summary"}},M=t=>{t.preventDefault(),window.location.href=d},D=t=>{t.preventDefault(),window.location.href=u},$=()=>{const t=document.getElementById("customerLogoutForm");t&&t.submit()},B=n.isAuthenticated?e.jsxs("button",{className:"customer-pill",onClick:()=>N(t=>!t),"aria-expanded":y,children:[e.jsx("span",{className:"customer-avatar","aria-hidden":"true",children:e.jsx("span",{children:n.initials})}),e.jsx("span",{className:"customer-pill__label",children:n.name}),e.jsx("i",{className:"fi fi-br-angle-small-down","aria-hidden":"true"})]}):e.jsxs("a",{className:"customer-pill",href:C,children:[e.jsx("span",{className:"customer-pill__label",children:"Sign in"}),e.jsx("i",{className:"fi fi-br-enter","aria-hidden":"true"})]}),W=n.isAuthenticated?e.jsxs("div",{className:`customer-dropdown ${y?"is-open":""}`,role:"menu",children:[e.jsx("a",{href:n.profileUrl,role:"menuitem",children:"My Account"}),e.jsx("a",{href:n.purchaseUrl,role:"menuitem",children:"My Purchase"}),e.jsx("a",{href:n.favoritesUrl,role:"menuitem",children:"My Favorites"}),e.jsx("button",{type:"button",role:"menuitem",onClick:$,children:"Logout"})]}):null,G={"--customer-accent-hue":L};return e.jsxs("header",{className:`customer-topbar ${m?"is-open":""}`,style:G,children:[e.jsx("div",{className:"customer-topbar__glow","aria-hidden":"true"}),e.jsx("div",{className:"customer-topbar__trail","aria-hidden":"true"}),e.jsxs("div",{className:"customer-topbar__inner",children:[e.jsxs("div",{className:"customer-topbar__brand",children:[e.jsx("span",{className:"brandmark__initial",children:"I"}),e.jsxs("div",{className:"brandmark__wordmark",children:[e.jsx("span",{className:"brandmark__word",children:"nkwise"}),e.jsx("span",{className:"brandmark__tagline",children:"Elegant invites & thoughtful giveaways"})]})]}),e.jsx("nav",{className:"customer-topbar__nav","aria-label":"Primary",children:I.map(({label:t,href:r})=>e.jsx("a",{href:r,onClick:()=>j(!1),children:e.jsx("span",{children:t})},R(t,r)))}),e.jsxs("div",{className:"customer-topbar__actions",children:[e.jsx("button",{className:"customer-icon-button customer-icon-button--ghost","aria-label":"Search",onClick:()=>{p(t=>!t),setTimeout(F,150)},children:e.jsx("i",{className:"fi fi-br-search","aria-hidden":"true"})}),e.jsx(f,{label:"Notifications",badge:x>0?x:null,iconClass:"fi fi-br-bell",onClick:D}),e.jsx(f,{label:"Favorites",iconClass:"fi fi-br-comment-heart",onClick:M}),e.jsx(f,{label:"Cart",iconClass:"bi bi-bag-heart-fill",onClick:q}),B,e.jsxs("button",{className:"customer-topbar__toggle","aria-label":"Toggle navigation","aria-expanded":m,onClick:()=>j(t=>!t),children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]}),W]}),e.jsx("div",{className:`customer-topbar__search-panel ${A?"is-open":""}`,children:e.jsxs("form",{action:c,method:"GET",children:[e.jsx("label",{htmlFor:"customerTopbarSearch",className:"sr-only",children:"Search templates"}),e.jsx("input",{id:"customerTopbarSearch",type:"text",name:"query",placeholder:"Search dreamy templates, giveaways, names..."}),e.jsx("button",{type:"submit",children:"Search"}),e.jsx("button",{type:"button",className:"customer-topbar__close",onClick:()=>p(!1),children:e.jsx("i",{className:"fi fi-br-cross-small","aria-hidden":"true"})})]})})]})},_=()=>{const a=document.getElementById("customer-topbar-root");if(a)try{const s=a.getAttribute("data-props")??"{}",c=JSON.parse(s);H.createRoot(a).render(e.jsx(X,{...c}))}catch(s){console.error("[InkWise] Failed to mount customer topbar",s)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",_,{once:!0}):_();
